(this["webpackJsonpfriday-fellows-web"]=this["webpackJsonpfriday-fellows-web"]||[]).push([[0],{118:function(e,a,t){e.exports=t(152)},123:function(e,a,t){},125:function(e,a,t){},143:function(e,a,t){},148:function(e,a,t){},150:function(e,a,t){},151:function(e,a,t){},152:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(10),i=t.n(s),c=(t(123),t(24)),l=t.n(c),o=t(41),m=t(29),u=(t(125),t(15));function d(e){return function(a){return{payload:a,type:e}}}function p(e){return function(){return{type:e}}}var g,E={fetchSeasonsStart:p("ACTION_FETCH_SEASONS_START"),fetchSeasonsSuccess:d("ACTION_FETCH_SEASONS_SUCCESS"),fetchSeriesStart:p("ACTION_FETCH_SERIES_START"),fetchSeriesSuccess:d("ACTION_FETCH_SERIES_SUCCESS"),fetchOnDeckStart:p("ACTION_FETCH_ONDECK_START"),fetchOnDeckSuccess:d("ACTION_FETCH_ONDECK_SUCCESS"),setSeasonStartDate:d("ACTION_SET_SEASON_START_DATE"),setSeriesId:d("SET_SERIES_ID")};!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPRING=1]="SPRING",e[e.SUMMER=2]="SUMMER",e[e.FALL=3]="FALL",e[e.WINTER=4]="WINTER"}(g||(g={}));var f={ondeck:void 0,loadingOnDeck:!1,seasons:[],loadingSeasons:!1,seriesForSeason:[],loadingSeries:!1,lastSync:void 0};function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"ACTION_FETCH_SEASONS_START":return Object(u.a)({},e,{loadingSeasons:!0});case"ACTION_FETCH_SEASONS_SUCCESS":return Object(u.a)({},e,{seasons:a.payload.json,lastSync:a.payload.lastSync,loadingSeasons:!1});case"ACTION_FETCH_SERIES_START":return Object(u.a)({},e,{loadingSeries:!0});case"ACTION_FETCH_SERIES_SUCCESS":return Object(u.a)({},e,{seriesForSeason:a.payload.json,loadingSeries:!1});case"ACTION_FETCH_ONDECK_START":return Object(u.a)({},e,{loadingOnDeck:!0});case"ACTION_FETCH_ONDECK_SUCCESS":return Object(u.a)({},e,{ondeck:a.payload.report,loadingOnDeck:!1});case"ACTION_SET_SEASON_START_DATE":var t=e.seasons.indexOf(a.payload.season);return Object(u.a)({},e,{seasons:e.seasons.map((function(e,n){if(n!==t)return e;var r=a.payload.startDate;return Object(u.a)({},e,{startDate:r?r.getTime():null})}))});case"SET_SERIES_ID":var n=e.seriesForSeason.indexOf(a.payload.series);return Object(u.a)({},e,{seriesForSeason:e.seriesForSeason.map((function(e,t){return t!==n?e:Object(u.a)({},e,{},a.payload.data)}))});default:return e}}var h=t(42),b=t.n(h),v=t(36),O=(t(143),t(188)),N=t(217),C=t(191),k=t(68),y=t(219),w=t(195),I=t(193),T=t(26),j=Object(O.a)((function(e){return Object(N.a)({header:Object(u.a)({},e.typography.button,{padding:e.spacing(1),marginLeft:"auto",marginRight:"auto",marginBottom:e.spacing(2),width:"fit-content",display:"flex",alignItems:"center"}),title:{marginLeft:e.spacing(1),marginRight:e.spacing(2)},lastSync:{marginRight:e.spacing(3)},root:{overflowX:"auto",margin:"0 10px"},table:{padding:"15px",minWidth:650,display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gridGap:e.spacing(3)},gridCell:{minWidth:"150px",minHeight:"150px",textAlign:"center",color:e.palette.text.secondary,whiteSpace:"nowrap"},cellLink:{textDecoration:"none"},cellBtn:{height:"150px"},cellTitle:{height:"40%",verticalAlign:"middle",lineHeight:"70px",fontSize:"30px"},cellDetails:{height:"50%",display:"grid",gridTemplateRows:"repeat(2, 1fr)",gridTemplateColumns:"repeat(2, 1fr)",margin:"10px"},unknownLabel:{fontSize:"15px",backgroundColor:"#525252",color:"#e29e00",margin:"auto",padding:"10px",borderRadius:"40px"},droppedLabel:{fontSize:"15px",backgroundColor:"#525252",color:"#e83f22",margin:"auto",padding:"10px",borderRadius:"40px"},watchingLabel:{fontSize:"15px",backgroundColor:"#525252",color:"#42af42",margin:"auto",padding:"10px",borderRadius:"40px"},completedLabel:{fontSize:"15px",backgroundColor:"#525252",color:"#4e92f9",margin:"auto",padding:"10px",borderRadius:"40px"}})}));var x,D=function(e){var a=e.seasons,t=e.lastSyncDate,n=e.loading,s=j(),i=function(e){var a=e.season;return r.a.createElement(T.b,{to:"/s/"+a.sheetId,className:s.cellLink},r.a.createElement(C.a,{className:s.gridCell},r.a.createElement(I.a,{className:s.cellBtn},r.a.createElement("div",{className:s.cellTitle},a.formattedName),r.a.createElement("div",{className:s.cellDetails},a.seriesStats[0]>0&&r.a.createElement("div",{className:s.unknownLabel},"Unknown ",a.seriesStats[0]),a.seriesStats[1]>0&&r.a.createElement("div",{className:s.droppedLabel},"Dropped ",a.seriesStats[1]),a.seriesStats[2]>0&&r.a.createElement("div",{className:s.watchingLabel},"Watching ",a.seriesStats[2]),a.seriesStats[3]>0&&r.a.createElement("div",{className:s.completedLabel},"Completed ",a.seriesStats[3])))))};return r.a.createElement("div",null,r.a.createElement(k.a,{className:s.header},r.a.createElement("span",{className:s.title},"All Seasons"),r.a.createElement(y.a,{title:"Last time data was read from GoogleSheets"},r.a.createElement("span",{className:s.lastSync},"Last Sync:\xa0",function(e){return e?new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"2-digit"}).format(e):"Unknown"}(t)))),r.a.createElement(k.a,{className:s.root},!n&&r.a.createElement("div",{className:s.table,"aria-label":"seasons grid"},a.map((function(e){return r.a.createElement(i,{season:e})}))),n&&r.a.createElement(w.a,{size:60})))},A=(t(148),t(16)),R=t(214),_=t(100),L=t(215),F=t(196),U=t(197),W=t(213),B=t(199),H=t(200),z=t(203),M=t(205),K=t(206),G=t(207),P=t(208),V=t(209),J=t(204),X=t(201),$=t(95),q=t.n($);!function(e){e[e.Unknown=0]="Unknown",e[e.Dropped=1]="Dropped",e[e.Watching=2]="Watching",e[e.Completed=3]="Completed",e[e.Continuing=4]="Continuing"}(x||(x={}));var Q=Object(O.a)((function(e){return Object(N.a)({header:Object(u.a)({},e.typography.button,{padding:e.spacing(1),marginLeft:"auto",marginRight:"auto",marginBottom:e.spacing(2),width:"fit-content",display:"flex",alignItems:"center"}),title:{marginLeft:e.spacing(1),marginRight:e.spacing(2),fontSize:"20px"},datePicker:{margin:0},pushLeft:{marginLeft:"10px"},paperBody:{margin:"auto",maxWidth:"60vw"},root:{overflowX:"auto",margin:"0 10px"},table:{minWidth:650}})}));function Y(e){var a=e.onClose,t=e.open,s=e.series,i=Object(n.useState)(s&&s.idAL||0),c=Object(m.a)(i,2),l=c[0],o=c[1],u=function(){a(l)};Object(n.useEffect)((function(){t&&o(s&&s.idAL||0)}),[t,s]);return r.a.createElement(L.a,{open:t,onClose:u,"aria-labelledby":"set-id-dialog-title","aria-describedby":"set-id-dialog-description"},r.a.createElement(F.a,{id:"set-id-dialog-title"},"Set AniList.co Id for Series"),r.a.createElement(U.a,null,r.a.createElement(W.a,{id:"id-input",label:"AniList Id",type:"number",variant:"outlined",InputLabelProps:{shrink:!0},margin:"normal",value:l,onChange:function(e){o(parseInt(e.target.value))}})),r.a.createElement(B.a,null,r.a.createElement(H.a,{onClick:u,color:"primary"},"Confirm")))}function Z(e){for(var a=e.seriesList,t=Q(),n=a.reduce((function(e,a){var t=a.votingRecord[a.votingRecord.length-1].weekNum;return t>e?t:e}),0),s=[],i=1;i<=n;i++)s.push(r.a.createElement(M.a,{key:i,align:"right"},"Week ",i));return r.a.createElement(k.a,{className:t.root},r.a.createElement(K.a,{className:t.table,"aria-label":"series voting grid"},r.a.createElement(G.a,null,r.a.createElement(P.a,null,r.a.createElement(M.a,null,"Series Name"),r.a.createElement(M.a,null,"Status"),s)),r.a.createElement(V.a,null,a.map((function(e){return r.a.createElement(P.a,{key:e.rowIndex},r.a.createElement(M.a,{component:"th",scope:"row"},e.title.raw,-1!==e.idAL&&r.a.createElement(X.a,{className:t.pushLeft,href:"https://anilist.co/anime/".concat(e.idAL),target:"_blank"},r.a.createElement(q.a,{fontSize:"small"}))),r.a.createElement(M.a,null,x[e.votingStatus]),e.votingRecord.map((function(e){return r.a.createElement(M.a,{align:"right"},e.msg?e.msg:["Ep",e.episodeNum,":",e.votesFor,"-",e.votesAgainst].join(" "))})))})))))}function ee(e){var a=e.seriesList,t=e.openIDDialog,n=Q(),s=function(e){var a=e.onClick,t=e.series;return r.a.createElement(H.a,{onClick:function(){a(t)}},"Edit")};return r.a.createElement(k.a,{className:n.root},r.a.createElement(K.a,{className:n.table,"aria-label":"series debug grid"},r.a.createElement(G.a,null,r.a.createElement(P.a,null,r.a.createElement(M.a,null,"Series Name\xa0(Raw)"),r.a.createElement(M.a,null,"Series Name\xa0(AniList)"),r.a.createElement(M.a,{align:"right"},"AniList\xa0ID"),r.a.createElement(M.a,{align:"right"},"MAL\xa0ID"),r.a.createElement(M.a,{align:"right"},"Type"),r.a.createElement(M.a,{align:"right"},"Episodes"))),r.a.createElement(V.a,null,a.map((function(e){return r.a.createElement(P.a,{key:e.rowIndex},r.a.createElement(M.a,{component:"th",scope:"row"},e.title.raw),r.a.createElement(M.a,null,e.title.english),r.a.createElement(M.a,{align:"right"},e.idAL),r.a.createElement(M.a,{align:"right"},e.idMal),r.a.createElement(M.a,{align:"right"},e.type),r.a.createElement(M.a,{align:"right"},e.episodes),r.a.createElement(M.a,null,r.a.createElement(s,{onClick:t,series:e})))})))))}var ae=function(e){var a=e.dispatch,t=e.backendURI,s=e.season,i=e.seriesList,c=void 0===i?[]:i,u=e.onStartDateChanged,d=e.onSeriesIdChanged,p=Object(v.g)().seasonId,g=Object(n.useState)(!1),f=Object(m.a)(g,2),S=f[0],h=f[1],O=Object(n.useState)(null),N=Object(m.a)(O,2),C=N[0],w=N[1],I=Object(n.useState)(!1),T=Object(m.a)(I,2),j=T[0],x=T[1],D=Q();if(Object(n.useEffect)((function(){(function(){var e=Object(o.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a(E.fetchSeriesStart()),e.next=4,b.a.get(t+"/getSeries?seasonId="+p);case 4:n=e.sent,a(E.fetchSeriesSuccess({json:n.data.series})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[a,t,p]),!s)return null;return r.a.createElement("div",null,r.a.createElement(k.a,{className:D.header},r.a.createElement("span",{className:D.title},s.formattedName),r.a.createElement(A.a,{utils:_.a},r.a.createElement(R.a,{className:D.datePicker,label:"Start Date",disableToolbar:!0,inputVariant:"outlined",variant:"inline",format:"MM/dd/yyyy",autoOk:!0,value:s.startDate,onChange:function(e){u(e,s)},KeyboardButtonProps:{"aria-label":"change date"},margin:"dense"})),null===s.startDate&&r.a.createElement(y.a,{title:"Missing Start Date"},r.a.createElement(z.a,{className:"push-left warning-icon text-top"},"warning")),r.a.createElement(J.a,{value:"debug",selected:j,onChange:function(){x(!j)}},"Debug")),j&&r.a.createElement(ee,{seriesList:c,openIDDialog:function(e){w(e),h(!0)}}),!j&&r.a.createElement(Z,{seriesList:c}),r.a.createElement(Y,{open:S,onClose:function(e){h(!1),C&&C.idAL!==e&&d(C,s.sheetId,e),w(null)},series:C}))},te=t(96),ne=t.n(te),re=(t(150),t(210)),se=t(202),ie=t(154),ce=t(216),le=Object(O.a)((function(e){return Object(N.a)({logo:{marginRight:e.spacing(2)},title:{marginRight:e.spacing(3)},navButton:{marginRight:e.spacing(1)},grow:{flexGrow:1}})})),oe=function(){var e=le();return r.a.createElement("div",null,r.a.createElement(re.a,{position:"static"},r.a.createElement(se.a,null,r.a.createElement(X.a,{edge:"start",className:e.logo,color:"inherit","aria-label":"logo"},r.a.createElement(T.b,{to:"/"},r.a.createElement("img",{src:ne.a,className:"App-logo",alt:"logo"}))),r.a.createElement(ie.a,{variant:"h6",className:e.title},"Friday Fellows Updater"),r.a.createElement(ce.a,{disableRipple:!0,component:T.c,to:"/ondeck",activeClassName:"activeLink"},r.a.createElement(H.a,{variant:"contained",className:e.navButton},"On Deck")),r.a.createElement(ce.a,{disableRipple:!0,component:T.c,to:"/seasons",activeClassName:"activeLink"},r.a.createElement(H.a,{variant:"contained",className:e.navButton},"Seasons")),r.a.createElement(ce.a,{disableRipple:!0,component:T.c,to:"/admin",activeClassName:"activeLink"},r.a.createElement(H.a,{variant:"contained",className:e.navButton,disabled:!0},"Admin")),r.a.createElement("div",{className:e.grow}),r.a.createElement(H.a,{color:"inherit"},"Login"))))},me=t(102),ue=t(3),de=t(97),pe=t.n(de),ge=t(99),Ee=t.n(ge),fe=t(67),Se=t(218),he=t(211),be=t(98),ve=t.n(be),Oe={success:pe.a,error:ve.a},Ne=Object(O.a)((function(e){return{success:{backgroundColor:fe.a[600]},error:{backgroundColor:e.palette.error.dark},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}}));function Ce(e){var a=Ne({}),t=e.className,n=e.message,s=e.onClose,i=e.variant,c=Object(me.a)(e,["className","message","onClose","variant"]),l=Oe[i];return r.a.createElement(he.a,Object.assign({className:Object(ue.a)(a[i],t),"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:a.message},r.a.createElement(l,{className:Object(ue.a)(a.icon,a.iconVariant)}),n),action:[r.a.createElement(X.a,{key:"close","aria-label":"close",color:"inherit",onClick:s},r.a.createElement(Ee.a,{className:a.icon}))]},c))}function ke(e){var a=e.open,t=e.msg,n=e.handleClose;function s(e,a){"clickaway"!==a&&n(!1)}return r.a.createElement(Se.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:a,autoHideDuration:6e3,onClose:s},r.a.createElement(Ce,{onClose:s,variant:"error",message:t}))}function ye(e){var a=e.open,t=e.msg,n=e.handleClose;function s(e,a){"clickaway"!==a&&n(!1)}return r.a.createElement(Se.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:a,autoHideDuration:3e3,onClose:s},r.a.createElement(Ce,{onClose:s,variant:"success",message:t}))}t(151);var we=Object(O.a)((function(e){return Object(N.a)({header:Object(u.a)({},e.typography.button,{padding:e.spacing(1),marginLeft:"auto",marginRight:"auto",marginBottom:e.spacing(2),width:"fit-content"}),headerSegment:{marginLeft:e.spacing(1),marginRight:e.spacing(1)},paperBody:{margin:"auto",maxWidth:"60vw"},table:{minWidth:650}})})),Ie=function(e){var a,t=e.report,n=e.loading,s=void 0!==n&&n,i=we();return r.a.createElement("div",null,r.a.createElement(k.a,{className:i.header},r.a.createElement("span",{className:i.headerSegment},null===t||void 0===t?void 0:t.seasonName),r.a.createElement("span",{className:i.headerSegment},"Week ",null===t||void 0===t?void 0:t.week),r.a.createElement("span",{className:i.headerSegment},"Next Session: ",(a=null===t||void 0===t?void 0:t.targetWatchDate)?new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"2-digit"}).format(new Date(a)):"Unknown")),r.a.createElement(k.a,{className:i.paperBody},r.a.createElement(K.a,{className:i.table,"aria-label":"simple table"},r.a.createElement(G.a,null,r.a.createElement(P.a,null,r.a.createElement(M.a,null,"Series Title (English)"),r.a.createElement(M.a,{align:"right"},"Episode"))),!s&&t&&r.a.createElement(V.a,null,t.series.map((function(e){return r.a.createElement(P.a,{key:e.title.raw},r.a.createElement(M.a,{component:"th",scope:"row"},e.title.raw),r.a.createElement(M.a,{align:"right"},e.episode))})))),s&&r.a.createElement(w.a,{size:60})))},Te=function(e){var a=e.backendURI,t=Object(n.useReducer)(S,f),s=Object(m.a)(t,2),i=s[0],c=s[1],u=Object(n.useState)(!1),d=Object(m.a)(u,2),p=d[0],g=d[1],h=Object(n.useState)(""),O=Object(m.a)(h,2),N=O[0],C=O[1],k=Object(n.useState)(!1),y=Object(m.a)(k,2),w=y[0],I=y[1],T=Object(n.useState)(""),j=Object(m.a)(T,2),x=j[0],A=j[1];Object(n.useEffect)((function(){(function(){var e=Object(o.a)(l.a.mark((function e(){var t,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(E.fetchSeasonsStart()),e.next=4,b.a.get(a+"/getAllSeasons");case 4:t=e.sent,n=t.data.lastSyncMs,r=n?new Date(n):void 0,c(E.fetchSeasonsSuccess({json:t.data.seasons,lastSync:r})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}})()()}),[a]),Object(n.useEffect)((function(){(function(){var e=Object(o.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(E.fetchOnDeckStart()),e.next=4,b.a.get(a+"/getOnDeckReports");case 4:t=e.sent,(n=t.data.reports)&&n.length>0&&c(E.fetchOnDeckSuccess({report:n[0]})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}})()()}),[a]);var R=function(){var e=Object(o.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={sheetId:n.sheetId,startDate:t?t.getTime():null},e.next=3,b.a.post(a+"/setSeasonStartDate",r);case 3:200===e.sent.status&&c(E.setSeasonStartDate({season:n,startDate:t}));case 5:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),_=function(){var e=Object(o.a)(l.a.mark((function e(t,n,r){var s,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={seasonId:n,row:t.rowIndex,seriesId:r},e.prev=1,e.next=4,b.a.post(a+"/setSeriesId",s);case 4:200===(i=e.sent).status&&(c(E.setSeriesId({series:t,data:i.data.data})),C("Updated AniList ID for ".concat(t.title.raw)),g(!0)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),A("Error when updating AniList ID for ".concat(t.title.raw)),I(!0);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(a,t,n){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"App"},r.a.createElement(oe,null),r.a.createElement("div",{className:"App-body"},r.a.createElement(v.d,null,r.a.createElement(v.b,{exact:!0,path:"/"},r.a.createElement(v.a,{to:"/ondeck"})),r.a.createElement(v.b,{exact:!0,path:"/ondeck"},r.a.createElement(Ie,{report:i.ondeck,loading:i.loadingOnDeck})),r.a.createElement(v.b,{exact:!0,path:"/seasons"},r.a.createElement(D,{seasons:i.seasons,lastSyncDate:i.lastSync,loading:i.loadingSeasons,onStartDateChanged:R})),r.a.createElement(v.b,{path:"/s/:seasonId",render:function(e){var t=e.match;return r.a.createElement(ae,{dispatch:c,backendURI:a,season:i.seasons.find((function(e){return String(e.sheetId)===t.params.seasonId})),seriesList:i.seriesForSeason,onStartDateChanged:R,onSeriesIdChanged:_})}}))),r.a.createElement((function(){return r.a.createElement("div",{className:"App-footer"},r.a.createElement("a",{href:"https://github.com/brisberg/friday-fellows-gcf"},"Github"))}),null),r.a.createElement(ye,{open:p,msg:N,handleClose:g}),r.a.createElement(ke,{open:w,msg:x,handleClose:I}))};var je={BACKEND_URI:"https://us-central1-driven-utility-202807.cloudfunctions.net"};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var xe=t(212),De=t(101),Ae=Object(De.a)({palette:{type:"dark"}});i.a.render(r.a.createElement(xe.a,{theme:Ae},r.a.createElement(T.a,null,r.a.createElement(Te,{backendURI:je.BACKEND_URI}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},96:function(e,a,t){e.exports=t.p+"static/media/logo.25bf045c.svg"}},[[118,1,2]]]);
//# sourceMappingURL=main.159759fc.chunk.js.map
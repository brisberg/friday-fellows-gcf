(this["webpackJsonpfriday-fellows-web"]=this["webpackJsonpfriday-fellows-web"]||[]).push([[0],{105:function(e,a,t){e.exports=t(138)},110:function(e,a,t){},112:function(e,a,t){},130:function(e,a,t){},135:function(e,a,t){},136:function(e,a,t){},137:function(e,a,t){},138:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(10),i=t.n(s),c=(t(110),t(22)),l=t.n(c),o=t(41),m=(t(112),t(14));function d(e){return function(a){return{payload:a,type:e}}}function u(e){return function(){return{type:e}}}var g,p="ACTION_FETCH_SEASONS_START",E="ACTION_FETCH_SEASONS_SUCCESS",f="ACTION_FETCH_SERIES_START",S="ACTION_FETCH_SERIES_SUCCESS",h="ACTION_FETCH_ONDECK_START",b="ACTION_FETCH_ONDECK_SUCCESS",v="ACTION_SET_SEASON_START_DATE",N="SET_SERIES_ID",y={fetchSeasonsStart:u(p),fetchSeasonsSuccess:d(E),fetchSeriesStart:u(f),fetchSeriesSuccess:d(S),fetchOnDeckStart:u(h),fetchOnDeckSuccess:d(b),setSeasonStartDate:d(v),setSeriesId:d(N)};!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPRING=1]="SPRING",e[e.SUMMER=2]="SUMMER",e[e.FALL=3]="FALL",e[e.WINTER=4]="WINTER"}(g||(g={}));var O={ondeck:void 0,loadingOnDeck:!1,seasons:[],loadingSeasons:!1,seriesForSeason:[],loadingSeries:!1,lastSync:void 0};function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case p:return Object(m.a)({},e,{loadingSeasons:!0});case E:return Object(m.a)({},e,{seasons:a.payload.json,lastSync:a.payload.lastSync,loadingSeasons:!1});case f:return Object(m.a)({},e,{loadingSeries:!0});case S:return Object(m.a)({},e,{seriesForSeason:a.payload.json,loadingSeries:!1});case h:return Object(m.a)({},e,{loadingOnDeck:!0});case b:return Object(m.a)({},e,{ondeck:a.payload.report,loadingOnDeck:!1});case v:var t=e.seasons.indexOf(a.payload.season);return Object(m.a)({},e,{seasons:e.seasons.map((function(e,n){if(n!==t)return e;var r=a.payload.startDate;return Object(m.a)({},e,{startDate:r?r.getTime():null})}))});case N:var n=e.seriesForSeason.indexOf(a.payload.series);return Object(m.a)({},e,{seriesForSeason:e.seriesForSeason.map((function(e,t){if(t!==n)return e;var r=a.payload.seriesId;return Object(m.a)({},e,{idAL:r||-1})}))});default:return e}}var k=t(39),x=t.n(k),C=t(34),I=(t(130),t(171)),D=t(199),R=t(174),j=t(66),L=t(200),T=t(178),A=t(176),_=t(24),F=Object(I.a)((function(e){return Object(D.a)({header:Object(m.a)({},e.typography.button,{padding:e.spacing(1),marginLeft:"auto",marginRight:"auto",marginBottom:e.spacing(2),width:"fit-content",display:"flex",alignItems:"center"}),title:{marginLeft:e.spacing(1),marginRight:e.spacing(2)},lastSync:{marginRight:e.spacing(3)},root:{overflowX:"auto",margin:"0 10px"},table:{padding:"15px",minWidth:650,display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gridGap:e.spacing(3)},gridCell:{minWidth:"150px",minHeight:"150px",textAlign:"center",color:e.palette.text.secondary,whiteSpace:"nowrap"},cellLink:{textDecoration:"none"},cellBtn:{height:"150px"},cellTitle:{height:"40%",verticalAlign:"middle",lineHeight:"70px",fontSize:"30px"},cellDetails:{height:"50%",display:"grid",gridTemplateRows:"repeat(2, 1fr)",gridTemplateColumns:"repeat(2, 1fr)",margin:"10px"},unknownLabel:{fontSize:"15px",backgroundColor:"#525252",color:"#e29e00",margin:"auto",padding:"10px",borderRadius:"40px"},droppedLabel:{fontSize:"15px",backgroundColor:"#525252",color:"#e83f22",margin:"auto",padding:"10px",borderRadius:"40px"},watchingLabel:{fontSize:"15px",backgroundColor:"#525252",color:"#42af42",margin:"auto",padding:"10px",borderRadius:"40px"},completedLabel:{fontSize:"15px",backgroundColor:"#525252",color:"#4e92f9",margin:"auto",padding:"10px",borderRadius:"40px"}})}));var U,B=function(e){var a=e.seasons,t=e.lastSyncDate,n=e.loading,s=F(),i=function(e){var a=e.season;return r.a.createElement(_.b,{to:"/s/"+a.sheetId,className:s.cellLink},r.a.createElement(R.a,{className:s.gridCell},r.a.createElement(A.a,{className:s.cellBtn},r.a.createElement("div",{className:s.cellTitle},a.formattedName),r.a.createElement("div",{className:s.cellDetails},a.seriesStats[0]>0&&r.a.createElement("div",{className:s.unknownLabel},"Unknown ",a.seriesStats[0]),a.seriesStats[1]>0&&r.a.createElement("div",{className:s.droppedLabel},"Dropped ",a.seriesStats[1]),a.seriesStats[2]>0&&r.a.createElement("div",{className:s.watchingLabel},"Watching ",a.seriesStats[2]),a.seriesStats[3]>0&&r.a.createElement("div",{className:s.completedLabel},"Completed ",a.seriesStats[3])))))};return r.a.createElement("div",null,r.a.createElement(j.a,{className:s.header},r.a.createElement("span",{className:s.title},"All Seasons"),r.a.createElement(L.a,{title:"Last time data was read from GoogleSheets"},r.a.createElement("span",{className:s.lastSync},"Last Sync:\xa0",function(e){return e?new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"2-digit"}).format(e):"Unknown"}(t)))),r.a.createElement(j.a,{className:s.root},!n&&r.a.createElement("div",{className:s.table,"aria-label":"seasons grid"},a.map((function(e){return r.a.createElement(i,{season:e})}))),n&&r.a.createElement(T.a,{size:60})))},W=(t(135),t(15)),M=t(197),z=t(88),H=t(198),K=t(179),G=t(180),P=t(196),J=t(183),X=t(184),V=t(187),$=t(189),q=t(190),Q=t(191),Y=t(192),Z=t(193),ee=t(188);!function(e){e[e.Unknown=0]="Unknown",e[e.Dropped=1]="Dropped",e[e.Watching=2]="Watching",e[e.Completed=3]="Completed",e[e.Continuing=4]="Continuing"}(U||(U={}));var ae=Object(I.a)((function(e){return Object(D.a)({header:Object(m.a)({},e.typography.button,{padding:e.spacing(1),marginLeft:"auto",marginRight:"auto",marginBottom:e.spacing(2),width:"fit-content",display:"flex",alignItems:"center"}),title:{marginLeft:e.spacing(1),marginRight:e.spacing(2),fontSize:"20px"},datePicker:{margin:0},paperBody:{margin:"auto",maxWidth:"60vw"},root:{overflowX:"auto",margin:"0 10px"},table:{minWidth:650}})}));function te(e){var a=e.onClose,t=e.open,s=e.series,i=Object(n.useState)(s&&s.idAL||0),c=Object(o.a)(i,2),l=c[0],m=c[1],d=function(){a(l)};return r.a.createElement(H.a,{open:t,onClose:d,"aria-labelledby":"set-id-dialog-title","aria-describedby":"set-id-dialog-description"},r.a.createElement(K.a,{id:"set-id-dialog-title"},"Set AniList.co Id for Series"),r.a.createElement(G.a,null,r.a.createElement(P.a,{id:"id-input",label:"AniList Id",type:"number",variant:"outlined",InputLabelProps:{shrink:!0},margin:"normal",value:l,onChange:function(e){m(parseInt(e.target.value))}})),r.a.createElement(J.a,null,r.a.createElement(X.a,{onClick:d,color:"primary"},"Confirm")))}function ne(e){for(var a=e.seriesList,t=ae(),n=a.reduce((function(e,a){var t=a.votingRecord[a.votingRecord.length-1].weekNum;return t>e?t:e}),0),s=[],i=1;i<=n;i++)s.push(r.a.createElement($.a,{key:i,align:"right"},"Week ",i));return r.a.createElement(j.a,{className:t.root},r.a.createElement(q.a,{className:t.table,"aria-label":"series voting grid"},r.a.createElement(Q.a,null,r.a.createElement(Y.a,null,r.a.createElement($.a,null,"Series Name"),r.a.createElement($.a,null,"Status"),s)),r.a.createElement(Z.a,null,a.map((function(e){return r.a.createElement(Y.a,{key:e.rowIndex},r.a.createElement($.a,{component:"th",scope:"row"},e.titleRaw),r.a.createElement($.a,null,U[e.votingStatus]),e.votingRecord.map((function(e){return r.a.createElement($.a,{align:"right"},e.msg?e.msg:["Ep",e.episodeNum,":",e.votesFor,"-",e.votesAgainst].join(" "))})))})))))}function re(e){var a=e.seriesList,t=e.openIDDialog,n=ae(),s=function(e){var a=e.onClick,t=e.series;return r.a.createElement(X.a,{onClick:function(){a(t)}},"Edit")};return r.a.createElement(j.a,{className:n.root},r.a.createElement(q.a,{className:n.table,"aria-label":"series debug grid"},r.a.createElement(Q.a,null,r.a.createElement(Y.a,null,r.a.createElement($.a,null,"Series Name\xa0(Raw)"),r.a.createElement($.a,null,"Series Name\xa0(AniList)"),r.a.createElement($.a,{align:"right"},"AniList\xa0ID"),r.a.createElement($.a,{align:"right"},"MAL\xa0ID"),r.a.createElement($.a,{align:"right"},"Type"),r.a.createElement($.a,{align:"right"},"Episodes"))),r.a.createElement(Z.a,null,a.map((function(e){return r.a.createElement(Y.a,{key:e.rowIndex},r.a.createElement($.a,{component:"th",scope:"row"},e.titleRaw),r.a.createElement($.a,null,e.titleEn),r.a.createElement($.a,{align:"right"},e.idAL),r.a.createElement($.a,{align:"right"},e.idMal),r.a.createElement($.a,{align:"right"},e.type),r.a.createElement($.a,{align:"right"},e.episodes),r.a.createElement($.a,null,r.a.createElement(s,{onClick:t,series:e})))})))))}var se=function(e){var a=e.dispatch,t=e.backendURI,s=e.season,i=e.seriesList,c=void 0===i?[]:i,m=e.onStartDateChanged,d=e.onSeriesIdChanged,u=Object(C.g)().seasonId,g=Object(n.useState)(!1),p=Object(o.a)(g,2),E=p[0],f=p[1],S=Object(n.useState)(null),h=Object(o.a)(S,2),b=h[0],v=h[1],N=Object(n.useState)(!1),O=Object(o.a)(N,2),w=O[0],k=O[1],I=ae();if(Object(n.useEffect)((function(){!function(){var e;l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a(y.fetchSeriesStart()),n.next=4,l.a.awrap(x.a.get(t+"/getSeries?seasonId="+u));case 4:e=n.sent,a(y.fetchSeriesSuccess({json:e.data.series})),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0);case 11:case"end":return n.stop()}}),null,null,[[0,8]])}()}),[a,t,u]),!s)return null;return r.a.createElement("div",null,r.a.createElement(j.a,{className:I.header},r.a.createElement("span",{className:I.title},s.formattedName),r.a.createElement(W.a,{utils:z.a},r.a.createElement(M.a,{className:I.datePicker,label:"Start Date",disableToolbar:!0,inputVariant:"outlined",variant:"inline",format:"MM/dd/yyyy",autoOk:!0,value:s.startDate,onChange:function(e){m(e,s)},KeyboardButtonProps:{"aria-label":"change date"},margin:"dense"})),null===s.startDate&&r.a.createElement(L.a,{title:"Missing Start Date"},r.a.createElement(V.a,{className:"push-left warning-icon text-top"},"warning")),r.a.createElement(ee.a,{value:"debug",selected:w,onChange:function(){k(!w)}},"Debug")),w&&r.a.createElement(re,{seriesList:c,openIDDialog:function(e){v(e),f(!0)}}),!w&&r.a.createElement(ne,{seriesList:c}),r.a.createElement(te,{open:E,onClose:function(e){f(!1),b&&d(b,s.sheetId,e),v(null)},series:b}))},ie=t(87),ce=t.n(ie),le=(t(136),t(194)),oe=t(186),me=t(185),de=t(140),ue=t(201),ge=Object(I.a)((function(e){return Object(D.a)({logo:{marginRight:e.spacing(2)},title:{marginRight:e.spacing(3)},navButton:{marginRight:e.spacing(1)},grow:{flexGrow:1}})})),pe=function(){var e=ge();return r.a.createElement("div",null,r.a.createElement(le.a,{position:"static"},r.a.createElement(oe.a,null,r.a.createElement(me.a,{edge:"start",className:e.logo,color:"inherit","aria-label":"logo"},r.a.createElement(_.b,{to:"/"},r.a.createElement("img",{src:ce.a,className:"App-logo",alt:"logo"}))),r.a.createElement(de.a,{variant:"h6",className:e.title},"Friday Fellows Updater"),r.a.createElement(ue.a,{disableRipple:!0,component:_.c,to:"/ondeck",activeClassName:"activeLink"},r.a.createElement(X.a,{variant:"contained",className:e.navButton},"On Deck")),r.a.createElement(ue.a,{disableRipple:!0,component:_.c,to:"/seasons",activeClassName:"activeLink"},r.a.createElement(X.a,{variant:"contained",className:e.navButton},"Seasons")),r.a.createElement(ue.a,{disableRipple:!0,component:_.c,to:"/admin",activeClassName:"activeLink"},r.a.createElement(X.a,{variant:"contained",className:e.navButton,disabled:!0},"Admin")),r.a.createElement("div",{className:e.grow}),r.a.createElement(X.a,{color:"inherit"},"Login"))))},Ee=(t(137),Object(I.a)((function(e){return Object(D.a)({header:Object(m.a)({},e.typography.button,{padding:e.spacing(1),marginLeft:"auto",marginRight:"auto",marginBottom:e.spacing(2),width:"fit-content"}),headerSegment:{marginLeft:e.spacing(1),marginRight:e.spacing(1)},paperBody:{margin:"auto",maxWidth:"60vw"},table:{minWidth:650}})}))),fe=function(e){var a=e.report,t=e.loading,n=void 0!==t&&t,s=Ee();return r.a.createElement("div",null,r.a.createElement(j.a,{className:s.header},r.a.createElement("span",{className:s.headerSegment},"Fall 2019"),r.a.createElement("span",{className:s.headerSegment},"Week 10"),r.a.createElement("span",{className:s.headerSegment},"Next Session: 11/22/2019")),r.a.createElement(j.a,{className:s.paperBody},r.a.createElement(q.a,{className:s.table,"aria-label":"simple table"},r.a.createElement(Q.a,null,r.a.createElement(Y.a,null,r.a.createElement($.a,null,"Series Title (English)"),r.a.createElement($.a,{align:"right"},"Episode"))),!n&&a&&r.a.createElement(Z.a,null,a.series.map((function(e){return r.a.createElement(Y.a,{key:e.seriesTitle},r.a.createElement($.a,{component:"th",scope:"row"},e.seriesTitle),r.a.createElement($.a,{align:"right"},e.episode))})))),n&&r.a.createElement(T.a,{size:60})))},Se=function(e){var a=e.backendURI,t=Object(n.useReducer)(w,O),s=Object(o.a)(t,2),i=s[0],c=s[1];Object(n.useEffect)((function(){!function(){var e,t,n;l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,c(y.fetchSeasonsStart()),r.next=4,l.a.awrap(x.a.get(a+"/getAllSeasons"));case 4:e=r.sent,t=e.data.lastSyncMs,n=t?new Date(t):void 0,c(y.fetchSeasonsSuccess({json:e.data.seasons,lastSync:n})),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(0),console.log(r.t0);case 13:case"end":return r.stop()}}),null,null,[[0,10]])}()}),[a]),Object(n.useEffect)((function(){!function(){var e,t;l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c(y.fetchOnDeckStart()),n.next=4,l.a.awrap(x.a.get(a+"/getOnDeckReports"));case 4:e=n.sent,(t=e.data.reports)&&t.length>0&&c(y.fetchOnDeckSuccess({report:t[0]})),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),console.log(n.t0);case 12:case"end":return n.stop()}}),null,null,[[0,9]])}()}),[a]);var m=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n={sheetId:t.sheetId,startDate:e?e.getTime():null},r.next=3,l.a.awrap(x.a.post(a+"/setSeasonStartDate",n));case 3:200===r.sent.status&&c(y.setSeasonStartDate({season:t,startDate:e}));case 5:case"end":return r.stop()}}))},d=function(e,t,n){var r;return l.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return r={seasonId:t,row:e.rowIndex,seriesId:n},s.next=3,l.a.awrap(x.a.post(a+"/setSeriesId",r));case 3:200===s.sent.status&&c(y.setSeriesId({series:e,seriesId:n}));case 5:case"end":return s.stop()}}))};return r.a.createElement("div",{className:"App"},r.a.createElement(pe,null),r.a.createElement("div",{className:"App-body"},r.a.createElement(C.d,null,r.a.createElement(C.b,{exact:!0,path:"/"},r.a.createElement(C.a,{to:"/ondeck"})),r.a.createElement(C.b,{exact:!0,path:"/ondeck"},r.a.createElement(fe,{report:i.ondeck,loading:i.loadingOnDeck})),r.a.createElement(C.b,{exact:!0,path:"/seasons"},r.a.createElement(B,{seasons:i.seasons,lastSyncDate:i.lastSync,loading:i.loadingSeasons,onStartDateChanged:m})),r.a.createElement(C.b,{path:"/s/:seasonId",render:function(e){var t=e.match;return r.a.createElement(se,{dispatch:c,backendURI:a,season:i.seasons.find((function(e){return String(e.sheetId)===t.params.seasonId})),seriesList:i.seriesForSeason,onStartDateChanged:m,onSeriesIdChanged:d})}}))),r.a.createElement((function(){return r.a.createElement("div",{className:"App-footer"},r.a.createElement("a",{href:"https://github.com/brisberg/friday-fellows-gcf"},"Github"))}),null))};var he={BACKEND_URI:"https://us-central1-driven-utility-202807.cloudfunctions.net"};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var be=t(195),ve=t(89),Ne=Object(ve.a)({palette:{type:"dark"}});i.a.render(r.a.createElement(be.a,{theme:Ne},r.a.createElement(_.a,null,r.a.createElement(Se,{backendURI:he.BACKEND_URI}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},87:function(e,a,t){e.exports=t.p+"static/media/logo.25bf045c.svg"}},[[105,1,2]]]);
//# sourceMappingURL=main.070310e4.chunk.js.map